<!doctype html>
<html>
	<head>
		<script type="text/javascript" src="jquery-1.11.3.min.js"></script>
		<script type="text/javascript">
			function doLog() {
				if(typeof(console) !== 'undefined') {
					console.log.apply(console, arguments);
				}
			}
			
			$(window).scroll(function() {
				if ( $(window).scrollTop() > 10 ) {
					$('a.back-to-top').fadeIn('slow');
				} else {
					$('a.back-to-top').fadeOut('slow');
				}
			});

			function play(el, filename) {
				var a = document.createElement('audio');
				if(!el.classList.contains('playing')) {
					
					a.src = filename;
					a.addEventListener('play', function() {
						doLog('start play', filename);
						$(el).find('.progressbar').css('width', '0');
						$(el)
.addClass('playing');
					});
				
					a.addEventListener('ended', function() {
						doLog('end play', filename);
						playing = false;
						$(el).removeClass('playing');
					});

					a.addEventListener('timeupdate', function() {
						if(a.duration) {
							var percent = a.currentTime / (a.duration * 0.01);
							console.log(percent);
							$(el).find('.progressbar').css('width', Math.round(percent)+'%');
						}
					});
					a.play();
				}
			}
		</script>
		<style type="text/css" >
				body {
					margin:0;
					padding:0;
					width:100%;
				}
				
				.sound{
					float:left;
					width:100px;
					height:100px;
					background:url('music.png') no-repeat center 100%;
					border:1px solid lightgray;
					border-radius:10px;
					margin:20px;
				}
				
				.sound.playing {
					filter: grayscale(100%);
				}
				
				.sound.playing .progressbar {
					 width:0%;
					 height:10px;
					 background:black;
					 margin-top:50%;
					 opacity:.75;
			    }
				
				a.back-to-top {
					display: none;
					width: 128px;
					height: 128px;
					text-indent: -9999px;
					position: fixed;
					z-index: 999;
					right: 20px;
					bottom: 20px;
					background: url("up-arrow.png") no-repeat center 30%;
				}
				
		</style>
	</head>
	<body onload="">
		<div class="wrapper">
			<div class="sound" onclick="play(this, 'philippe.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'a-ce-jour.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'african-americany.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'je-sais.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'mon-frere.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'mourir-connard.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'payer.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'petit-con.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'philippe.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'qui-a-tue.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'rien-a-foutre.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'salaud.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'sale-encule.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'ta-gueule.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'vas-y.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'vengeance.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'veux-ce-connard.ogg');"><div class="progressbar"></div></div>
			<div class="sound" onclick="play(this, 'viens-ici.ogg');"><div class="progressbar"></div></div>
		</div>
		<a onclick="javascript:$('html,body').animate({ scrollTop: 0 }, 'slow');" class="back-to-top">Back to Top</a>
	</body>
</html>
